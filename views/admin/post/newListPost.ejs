<div class="content-page">
    <div class="content">
        <div class="content-fluid">
            <div class="card">
                <div class="card-body">
                    <div class="card-body-action-course">
                        <h4 class="header-title mt-0 mb-3">Tất cả bài viết</h4>
                        <div class="card-body-action-right">
                            <div class="dropdown float-end">
                                <button class="btn btn-info dropdown-toggle" type="button" id="dropdownMenuButton"
                                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    Sắp xếp bài viết</i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"
                                    data-popper-placement="bottom-start"
                                    style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate3d(0px, 40px, 0px);">
                                    <a class="dropdown-item" href="/admin/post/list-post">Tất cả bài viết</a>
                                    <a class="dropdown-item" href="/admin/post/list-post-report">Bị báo cáo</a>
                                </div><!-- end dropdown-menu -->
                            </div><!-- end dropdown -->
                        </div><!-- end card-body-action-right -->
                    </div><!-- end card-body-action-course -->
                    <hr class="my-2">
                    <div class="row justify-content-center gap-1">
                        <div class="col-lg-7 mt-3">
                            <div class="card-post card-content border border-3 rounded rounded-lg shadow-sm p-3">
                                <div class="d-flex">
                                    <img class="flex-shrink-0 me-3 rounded-circle avatar-md" alt="Avatar"
                                        src="../../../public/assets/images/users/user-1.jpg">
                                    <div class="input-group"
                                        style="width: 100%; height: 58px; border:2px solid rgb(215, 215, 215); border-radius: 15px; padding: 15px; cursor: pointer;"
                                        data-bs-toggle="modal" data-bs-target="#postModal">
                                        <a href="#" disabled class="text-decoration-none" style="color: gray;">Bạn đang
                                            nghĩ gì thế?</a>
                                    </div>
                                </div>
                                <hr>
                                <div class="text-center">
                                    <a href="#" class="text-decoration-none mr-5" data-bs-toggle="modal"
                                        data-bs-target="#postModal">
                                        <i class="fas fa-images text-success"></i>
                                        <span class="text-secondary fw-semibold">Ảnh/Video</span>
                                    </a>
                                    <a href="#" class="text-decoration-none ml-5" data-bs-toggle="modal"
                                        data-bs-target="#postModal">
                                        <i class="ti-face-smile text-warning"></i>
                                        <span class="text-secondary fw-semibold">Cảm xúc/hoạt động</span>
                                    </a>
                                </div>

                                <div class="modal" id="postModal">
                                    <div class="modal-dialog">
                                        <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                                <img class="flex-shrink-0 me-3 rounded-circle avatar-md" alt="Avatar"
                                                    src="../../public/assets/images/users/user-2.jpg">
                                                <div class="flex-grow-1 m-0">
                                                    <h4 class="media-heading fw-bolder fs-4 mt-0">Minh Quân</h4>
                                                    <select name="" id="" class="badge text-dark">
                                                        <option selected>
                                                            Công khai
                                                        </option>
                                                        <option>
                                                            Riêng tư
                                                        </option>
                                                    </select>
                                                </div>

                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body border border-1 rounded">
                                                <textarea name="" id="" cols="56" rows="5" class="border rounded p-3"
                                                    placeholder="Ban dang nghi gi???"></textarea>
                                                <form action="/" method="post" class="" id="myAwesomeDropzone"
                                                    data-plugin="dropzone" data-previews-container="#file-previews"
                                                    data-upload-preview-template="#uploadPreviewTemplate">
                                                    <div class="fallback">
                                                        <input name="file" type="file" multiple />
                                                    </div>
                                                    <div class="dropzone-previews mt-3" id="file-previews"></div>
                                                    <div class="dz-message needsclick text-center mt-2">
                                                        <i class="fas fa-images text-success h2 pointer mr-5"></i>
                                                        <i class="ti-face-smile text-warning h2 pointer ml-5"></i>
                                                    </div>
                                                </form>

                                            </div>
                                            <!-- file preview template -->
                                            <div class="d-none" id="uploadPreviewTemplate">
                                                <div class="card mt-1 mb-0 shadow-none border">
                                                    <div class="p-2">
                                                        <div class="row align-items-center">
                                                            <div class="col-auto">
                                                                <img data-dz-thumbnail src="#"
                                                                    class="avatar-sm rounded bg-light" alt="">
                                                            </div>
                                                            <div class="col ps-0">
                                                                <a href="javascript:void(0);" class="text-muted fw-bold"
                                                                    data-dz-name></a>
                                                                <p class="mb-0" data-dz-size></p>
                                                            </div>
                                                            <div class="col-auto">
                                                                <!-- Button -->
                                                                <a href="" class="btn btn-link btn-lg text-muted"
                                                                    data-dz-remove>
                                                                    <i class="dripicons-cross"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-sm btn-danger w-100"
                                                    data-bs-dismiss="modal">Huỷ</button>
                                                <button type="button" class="btn btn-sm btn-success w-100"
                                                    data-bs-dismiss="modal">Đăng</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-7">
                            <% posts.forEach((row)=>{ %>
                                <div class="card-content border border-2 rounded-3 shadow-sm p-3 mt-4">
                                    <div class="card-content-header">
                                        <div class="d-flex">
                                            <img class="flex-shrink-0 me-3 rounded-circle avatar-lg" alt="Avatar"
                                                src="<%= row.profile.avatarUrl %>">
                                            <div class="flex-grow-1 m-0">
                                                <h4 class="media-heading fw-bolder fs-3 mt-0">
                                                    <%= row.profile.name %>
                                                </h4>
                                                <span class="fs-5"><i class="fas fa-globe-asia"></i> Công khai</span>
                                            </div>
                                        </div>
                                    </div><!-- End card-content-header -->
                                    <div class="card-content-body mt-2">
                                        <p>
                                            <%= row.content %>
                                        </p>
                                        <div id="carouselExampleControls" class="carousel slide"
                                            data-bs-ride="carousel">
                                            <div class="carousel-inner" style="height: fit-content;">
                                                <% row.files.forEach((value,index)=>{ %>
                                                    <%if(index==0){%>
                                                        <%if(value.type=="video" ){%>
                                                            <div class="carousel-item active">
                                                                <video class="d-block w-100" style="height: 350px;" controls>
                                                                    <source src="<%=value.url%>" type="video/mp4">
                                                                </video>
                                                            </div>
                                                            <%}else{%>
                                                                <div class="carousel-item active">
                                                                    <img src="<%=value.url%>" class="d-block w-100"
                                                                        alt="Image1">
                                                                </div>
                                                                <%}%>
                                                                    <%}else%>
                                                                        <%{%>
                                                                            <div class="carousel-item">
                                                                                <img src="<%=value.url%>"
                                                                                    class="d-block w-100"
                                                                                    alt="Image<%=index%>">
                                                                            </div>
                                                                            <%}%>
                                                                                <% }) %>
                                            </div>


                                            <button class="carousel-control-prev" type="button"
                                                data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Previous</span>
                                            </button>
                                            <button class="carousel-control-next" type="button"
                                                data-bs-target="#carouselExampleControls" data-bs-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="visually-hidden">Next</span>
                                            </button>
                                        </div>
                                    </div><!-- End card-content-body -->
                                    <div class="card-content-footer mt-2">
                                        <a href="#" class="text-decoration-none text-dark">
                                            <i class="fas fa-thumbs-up text-primary"></i>
                                            <span class="fw-medium fs-6">
                                                <%= row.numLike %> likes
                                            </span>
                                        </a>
                                        <a href="#" class="text-decoration-none text-dark float-end">
                                            <i class="fas fa-comment-alt"></i>
                                            <span class="fw-medium fs-6">
                                                <%= row.numComment %> comments
                                            </span>
                                        </a>
                                    </div><!-- End card-content-header -->
                                </div><!-- End card-content -->
                                <% }) %>
                        </div>
                    </div>
                </div><!-- End card-body -->
            </div><!-- end card -->
        </div><!-- End content-fluid -->
    </div><!-- End content -->
</div><!-- End content-page -->

<!-- Plugins js -->
<script src="../../../public/assets/libs/dropzone/min/dropzone.min.js"></script>
<script src="../../../public/assets/libs/dropify/js/dropify.min.js"></script>

<!-- Init js-->
<script src="../../../public/assets/js/pages/form-fileuploads.init.js"></script>